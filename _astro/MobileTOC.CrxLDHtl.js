import{o as pt,i as ut,a as ht}from"./props.DnOApy3u.js";import{f as p,j as N,t as C,k as E,a as f,p as bt,b as gt,g as o,m as A,c as d,h as L,s as _,d as x,r as i,n as G,o as J}from"./render.a51jSL2p.js";import{I as w,i as y}from"./Icon.u0lcCQlk.js";import{e as Q,i as R}from"./each.CM-9TCi7.js";import{i as U}from"./translation.DscByyb2.js";import{I as W}from"./zh_TW.DPfKd2JZ.js";/* empty css                        */import"./config.DFtsxXIk.js";var _t=p('<div class="text-center py-8 text-black/50 dark:text-white/50"><!> <p>暂无文章</p></div>'),xt=p('<div class="post-category svelte-1001a5l"> </div>'),wt=p('<button class="post-item svelte-1001a5l"><div class="post-title svelte-1001a5l"><!> </div> <!></button>'),yt=p('<div class="post-content svelte-1001a5l"></div>'),It=p('<div class="text-center py-8 text-black/50 dark:text-white/50"><!> <p>当前页面没有目录</p></div>'),kt=p('<button><span class="toc-text svelte-1001a5l"> </span></button>'),Tt=p('<div class="toc-content svelte-1001a5l"></div>'),Ct=p(`<button aria-label="Table of Contents" id="mobile-toc-switch" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90 lg:!hidden"><!></button> <div id="mobile-toc-panel" class="float-panel float-panel-closed mobile-toc-panel absolute md:w-[20rem] w-[calc(100vw-2rem)]
		top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-4 svelte-1001a5l"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-bold text-[var(--primary)]"> </h3> <button aria-label="Close TOC" class="btn-plain rounded-lg h-8 w-8 active:scale-90"><!></button></div> <!></div>`,1);function Bt(X,Z){gt(Z,!1);let q=A([]),O=A([]),I=A(""),h,k=A(!1);const V=()=>{document.getElementById("mobile-toc-panel")?.classList.toggle("float-panel-closed")},Y=e=>{const t=document.getElementById("mobile-toc-panel");t&&t.classList.add("float-panel-closed")},$=()=>{const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),t=[];e.forEach(s=>{if(s.id){const l=parseInt(s.tagName.charAt(1)),v=s.textContent?.trim()||"";t.push({id:s.id,text:v,level:l})}}),_(q,t)},tt=()=>{const e=document.querySelectorAll(".card-base"),t=[];e.forEach(s=>{const l=s.querySelector('a[href*="/posts/"].transition.group'),v=s.querySelector('a[href*="/categories/"].link-lg'),n=l?.querySelector('svg[data-icon="mdi:pin"]');if(l){const a=l.getAttribute("href"),m=l.textContent?.replace(/\s+/g," ").trim()||"",r=v?.textContent?.trim()||"",c=!!n;a&&m&&t.push({title:m,url:a,category:r,pinned:c})}}),_(O,t)},et=()=>{_(k,window.location.pathname==="/"||window.location.pathname==="")},ot=e=>{const t=document.getElementById(e);if(t){Y();const l=t.offsetTop-80;window.scrollTo({top:l,behavior:"smooth"})}},at=e=>{Y(),window.location.href=e},P=()=>{const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),t=window.scrollY,s=100;let l="";e.forEach(v=>{if(v.id){const n=v.offsetTop-s;t>=n&&(l=v.id)}}),_(I,l)},st=()=>{const e=document.querySelectorAll("h1, h2, h3, h4, h5, h6");h&&h.disconnect(),h=new IntersectionObserver(t=>{t.forEach(s=>{s.isIntersecting&&_(I,s.target.id)})},{rootMargin:"-80px 0px -80% 0px",threshold:0}),e.forEach(t=>{t.id&&h.observe(t)})},z=()=>{et(),o(k)?tt():($(),st(),P())};pt(()=>(setTimeout(z,100),window.addEventListener("scroll",P),()=>{h&&h.disconnect(),window.removeEventListener("scroll",P)})),typeof window<"u"&&(window.mobileTOCInit=z),ut();var D=Ct(),T=N(D),nt=d(T);w(nt,{icon:"material-symbols:format-list-bulleted",class:"text-[1.25rem]"}),i(T);var F=x(T,2),S=d(F),H=d(S),lt=d(H,!0);i(H);var B=x(H,2),it=d(B);w(it,{icon:"material-symbols:close",class:"text-[1rem]"}),i(B),i(S);var rt=x(S,2);{var ct=e=>{var t=G(),s=N(t);{var l=n=>{var a=_t(),m=d(a);w(m,{icon:"material-symbols:article-outline",class:"text-2xl mb-2"}),J(2),i(a),f(n,a)},v=n=>{var a=yt();Q(a,5,()=>o(O),R,(m,r)=>{var c=wt(),b=d(c),g=d(b);{var M=u=>{w(u,{icon:"mdi:pin",class:"pinned-icon"})};y(g,u=>{o(r).pinned&&u(M)})}var j=x(g);i(b);var vt=x(b,2);{var mt=u=>{var K=xt(),ft=d(K,!0);i(K),C(()=>L(ft,o(r).category)),f(u,K)};y(vt,u=>{o(r).category&&u(mt)})}i(c),C(()=>L(j,` ${o(r).title??""}`)),E("click",c,()=>at(o(r).url)),f(m,c)}),i(a),f(n,a)};y(s,n=>{o(O).length===0?n(l):n(v,!1)})}f(e,t)},dt=e=>{var t=G(),s=N(t);{var l=n=>{var a=It(),m=d(a);w(m,{icon:"material-symbols:article-outline",class:"text-2xl mb-2"}),J(2),i(a),f(n,a)},v=n=>{var a=Tt();Q(a,5,()=>o(q),R,(m,r)=>{var c=kt();let b;var g=d(c),M=d(g,!0);i(g),i(c),C(j=>{b=ht(c,1,`toc-item level-${o(r).level??""} ${o(I)===o(r).id?"active":""}`,"svelte-1001a5l",b,j),L(M,o(r).text)},[()=>({active:o(I)===o(r).id})]),E("click",c,()=>ot(o(r).id)),f(m,c)}),i(a),f(n,a)};y(s,n=>{o(q).length===0?n(l):n(v,!1)})}f(e,t)};y(rt,e=>{o(k)?e(ct):e(dt,!1)})}i(F),C(e=>L(lt,e),[()=>o(k)?U(W.postList):U(W.tableOfContents)]),E("click",T,V),E("click",B,V),f(X,D),bt()}export{Bt as default};
