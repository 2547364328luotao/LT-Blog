import{o as wt,i as bt,a as gt}from"./props.BdB73DY8.js";import{f as h,j as K,t as A,k as P,a as m,p as _t,b as xt,g as o,m as q,c as v,h as O,s as x,d as y,r,a9 as G,aa as J}from"./render.D9y_GpBm.js";import{I,i as k}from"./Icon.CEhm_lpJ.js";import{e as Q,i as X}from"./each.QEs15Pkq.js";import{i as Z}from"./translation.BrPKTDiI.js";import{I as $}from"./zh_TW.Bwnjrhr3.js";/* empty css                        */import"./config.xEVMtnDH.js";function yt(i,T){if(!i||typeof i!="string"){console.warn("navigateToPage: Invalid URL provided");return}if(i.startsWith("http://")||i.startsWith("https://")||i.startsWith("//")){window.open(i,"_blank");return}if(i.startsWith("#")){const u=document.getElementById(i.slice(1));u&&u.scrollIntoView({behavior:"smooth"});return}if(typeof window<"u"&&window.swup)try{T?.replace||window.swup.navigate(i)}catch(u){console.error("Swup navigation failed:",u),tt(i)}else tt(i)}function tt(i,T){window.location.href=i}var It=h('<div class="text-center py-8 text-black/50 dark:text-white/50"><!> <p>暂无文章</p></div>'),kt=h('<div class="post-category svelte-1001a5l"> </div>'),Tt=h('<button class="post-item svelte-1001a5l"><div class="post-title svelte-1001a5l"><!> </div> <!></button>'),Et=h('<div class="post-content svelte-1001a5l"></div>'),Lt=h('<div class="text-center py-8 text-black/50 dark:text-white/50"><!> <p>当前页面没有目录</p></div>'),Ct=h('<button><span class="toc-text svelte-1001a5l"> </span></button>'),St=h('<div class="toc-content svelte-1001a5l"></div>'),At=h(`<button aria-label="Table of Contents" id="mobile-toc-switch" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90 lg:!hidden"><!></button> <div id="mobile-toc-panel" class="float-panel float-panel-closed mobile-toc-panel absolute md:w-[20rem] w-[calc(100vw-2rem)]
		top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-4 svelte-1001a5l"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-bold text-[var(--primary)]"> </h3> <button aria-label="Close TOC" class="btn-plain rounded-lg h-8 w-8 active:scale-90"><!></button></div> <!></div>`,1);function Nt(i,T){xt(T,!1);let u=q([]),B=q([]),E=q(""),b,L=q(!1),C=!1;const U=()=>{document.getElementById("mobile-toc-panel")?.classList.toggle("float-panel-closed")},Y=t=>{const e=document.getElementById("mobile-toc-panel");e&&e.classList.add("float-panel-closed")},et=()=>{const t=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),e=[];t.forEach(s=>{if(s.id){const l=parseInt(s.tagName.charAt(1)),f=s.textContent?.trim()||"";e.push({id:s.id,text:f,level:l})}}),x(u,e)},ot=()=>{const t=document.querySelectorAll(".card-base"),e=[];t.forEach(s=>{const l=s.querySelector('a[href*="/posts/"].transition.group'),f=s.querySelector('a[href*="/categories/"].link-lg'),n=l?.querySelector('svg[data-icon="mdi:pin"]');if(l){const a=l.getAttribute("href"),p=l.textContent?.replace(/\s+/g," ").trim()||"",c=f?.textContent?.trim()||"",d=!!n;a&&p&&e.push({title:p,url:a,category:c,pinned:d})}}),x(B,e)},at=()=>{x(L,window.location.pathname==="/"||window.location.pathname==="")},st=t=>{const e=document.getElementById(t);if(e){Y();const l=e.offsetTop-80;window.scrollTo({top:l,behavior:"smooth"})}},nt=t=>{Y(),yt(t)},H=()=>{const t=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),e=window.scrollY,s=100;let l="";t.forEach(f=>{if(f.id){const n=f.offsetTop-s;e>=n&&(l=f.id)}}),x(E,l)},it=()=>{const t=document.querySelectorAll("h1, h2, h3, h4, h5, h6");b&&b.disconnect(),b=new IntersectionObserver(e=>{e.forEach(s=>{s.isIntersecting&&x(E,s.target.id)})},{rootMargin:"-80px 0px -80% 0px",threshold:0}),t.forEach(e=>{e.id&&b.observe(e)})},lt=()=>{if(typeof window<"u"&&(C=!!window.swup,!C)){const t=()=>{window.swup&&(C=!0,document.removeEventListener("swup:enable",t))};document.addEventListener("swup:enable",t),setTimeout(()=>{window.swup&&(C=!0,document.removeEventListener("swup:enable",t))},1e3)}},z=()=>{at(),lt(),o(L)?ot():(et(),it(),H())};wt(()=>(setTimeout(z,100),window.addEventListener("scroll",H),()=>{b&&b.disconnect(),window.removeEventListener("scroll",H)})),typeof window<"u"&&(window.mobileTOCInit=z),bt();var D=At(),S=K(D),rt=v(S);I(rt,{icon:"material-symbols:format-list-bulleted",class:"text-[1.25rem]"}),r(S);var F=y(S,2),W=v(F),M=v(W),ct=v(M,!0);r(M);var j=y(M,2),dt=v(j);I(dt,{icon:"material-symbols:close",class:"text-[1rem]"}),r(j),r(W);var vt=y(W,2);{var ft=t=>{var e=G(),s=K(e);{var l=n=>{var a=It(),p=v(a);I(p,{icon:"material-symbols:article-outline",class:"text-2xl mb-2"}),J(2),r(a),m(n,a)},f=n=>{var a=Et();Q(a,5,()=>o(B),X,(p,c)=>{var d=Tt(),g=v(d),_=v(g);{var N=w=>{I(w,{icon:"mdi:pin",class:"pinned-icon"})};k(_,w=>{o(c).pinned&&w(N)})}var R=y(_);r(g);var mt=y(g,2);{var ut=w=>{var V=kt(),ht=v(V,!0);r(V),A(()=>O(ht,o(c).category)),m(w,V)};k(mt,w=>{o(c).category&&w(ut)})}r(d),A(()=>O(R,` ${o(c).title??""}`)),P("click",d,()=>nt(o(c).url)),m(p,d)}),r(a),m(n,a)};k(s,n=>{o(B).length===0?n(l):n(f,!1)})}m(t,e)},pt=t=>{var e=G(),s=K(e);{var l=n=>{var a=Lt(),p=v(a);I(p,{icon:"material-symbols:article-outline",class:"text-2xl mb-2"}),J(2),r(a),m(n,a)},f=n=>{var a=St();Q(a,5,()=>o(u),X,(p,c)=>{var d=Ct();let g;var _=v(d),N=v(_,!0);r(_),r(d),A(R=>{g=gt(d,1,`toc-item level-${o(c).level??""} ${o(E)===o(c).id?"active":""}`,"svelte-1001a5l",g,R),O(N,o(c).text)},[()=>({active:o(E)===o(c).id})]),P("click",d,()=>st(o(c).id)),m(p,d)}),r(a),m(n,a)};k(s,n=>{o(u).length===0?n(l):n(f,!1)})}m(t,e)};k(vt,t=>{o(L)?t(ft):t(pt,!1)})}r(F),A(t=>O(ct,t),[()=>o(L)?Z($.postList):Z($.tableOfContents)]),P("click",S,U),P("click",j,U),m(i,D),_t()}export{Nt as default};
