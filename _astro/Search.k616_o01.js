import{o as U,i as X}from"./lifecycle.CmSxJR7h.js";import{l as z,k as Z,e as A,f as $,t as B,g as e,a as R,p as D,b as ee,s as d,i as l,m as b,h as o,r as c,u as g,j as F}from"./template.dMS9yzsx.js";import{e as M,s as te}from"./render.ASJFz6MC.js";import{e as ae,i as re}from"./each.DZgPpgn4.js";import{I as w,h as ie}from"./Icon.CjLo3ErB.js";import{r as j,s as K}from"./props.B65lZjQ7.js";import{b as V}from"./input.x9EXZ6S7.js";import{I as W}from"./zh_TW.Bwnjrhr3.js";import{i as Y}from"./translation.BrPKTDiI.js";import{u as q}from"./url-utils.n47EJZxe.js";/* empty css                        */import"./functions.Bd2-gSuy.js";import"./config.xEVMtnDH.js";var se=A(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),ne=A(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1adkdfv"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1adkdfv"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1adkdfv"/></div> <!></div>`,1);function ke(C,G){ee(G,!1);let i=b(""),s=b(""),f=b([]),x=!1,n=b(!1);const le=[{url:q("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:q("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],H=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},k=(t,r)=>{const a=document.getElementById("search-panel");!a||!r||(t?a.classList.remove("float-panel-closed"):a.classList.add("float-panel-closed"))},p=async(t,r)=>{if(!t){k(!1,r),d(f,[]);return}if(e(n))try{let a=[];if(x&&window.pagefind){const m=await window.pagefind.search(t);a=await Promise.all(m.results.map(v=>v.data()))}else a=[],console.error("Pagefind is not available in production environment.");d(f,a),k(e(f).length>0,r)}catch(a){console.error("Search error:",a),d(f,[]),k(!1,r)}finally{}};U(()=>{const t=()=>{d(n,!0),x=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",x),e(i)&&p(e(i),!0),e(s)&&p(e(s),!1)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),t()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),t()}),setTimeout(()=>{e(n)||(console.log("Fallback: Initializing search after timeout."),t())},2e3)}),z(()=>(e(n),e(i)),()=>{e(n)&&e(i)&&(async()=>await p(e(i),!0))()}),z(()=>(e(n),e(s)),()=>{e(n)&&e(s)&&(async()=>await p(e(s),!1))()}),Z(),X();var I=ne(),y=$(I),P=o(y);w(P,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var u=l(P,2);j(u),c(y);var h=l(y,2),J=o(h);w(J,{icon:"material-symbols:search",class:"text-[1.25rem]"}),c(h);var S=l(h,2),_=o(S),L=o(_);w(L,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var E=l(L,2);j(E),c(_);var N=l(_,2);ae(N,1,()=>e(f),re,(t,r)=>{var a=se(),m=o(a),v=o(m,!0),O=l(v);w(O,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),c(m);var T=l(m,2),Q=o(T);ie(Q,()=>(e(r),g(()=>e(r).excerpt))),c(T),c(a),B(()=>{K(a,"href",(e(r),g(()=>e(r).url))),te(v,(e(r),g(()=>e(r).meta.title)))}),R(t,a)}),c(S),B(t=>K(u,"placeholder",t),[()=>(F(Y),F(W),g(()=>Y(W.search)))]),V(u,()=>e(i),t=>d(i,t)),M("focus",u,()=>p(e(i),!0)),M("click",h,H),V(E,()=>e(s),t=>d(s,t)),R(C,I),D()}export{ke as default};
